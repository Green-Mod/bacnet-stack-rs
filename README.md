# bacnet-stack-rs

> This library is a Rust wrapper for the [BACnet Stack](https://github.com/bacnet-stack/bacnet-stack) project built with [`bindgen`](https://github.com/rust-lang/rust-bindgen).

## Bindings

### build.rs

The build.rs file contains all the instructions to:
1. Build the BACnet Stack C code contained in the `bacnet-stack` folder
2. Generate the bindings with `bindgen`

Note that at the moment the `build.rs` file is configured to build the BACnet Stack for the `bsd` platform (Mac OSX).

### BACnet Stack

The `C` code in the `bacnet-stack` folder is an elaboration of the original [BACnet Stack](https://github.com/bacnet-stack/bacnet-stack) source code.

It contains only the `src/bacnet` and the `src/ports` folders and a `wrapper.h` file (manually generated by us).

Also, all the `C` code in the `src/bacnet` folder has been cleaned up to include files with relative paths instead of absolute paths

```diff
- #include "bacnet/bacdef.h"
+ #include "bacdef.h"
```

### Bindings generation

To generate the bindings it is sufficient to run the following commands:

```bash
cargo clean # Remove the old bindings
cargo build
```

## Examples

In the `examples` folder there are some experiments and examples of how to use the Rust library.

To execute the examples, run the following commands:

```bash
cargo run --example whois
cargo run --example iam
...
```
